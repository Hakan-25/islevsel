<!DOCTYPE html>
<html lang="tr">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MXHVBZBVZJ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-MXHVBZBVZJ');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>PDF & Pro Flappy</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #f0f2f5; color: #333; 
            margin: 0; padding: 0; 
            display: flex; flex-direction: column; align-items: center; min-height: 100vh;
        }
        
        .tool-container { 
            background: white; width: 90%; max-width: 500px; padding: 30px; 
            border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
            text-align: center; margin-top: 30px; margin-bottom: 30px;
        }

        .btn { 
            background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
            color: white; padding: 15px 30px; border: none; border-radius: 50px; 
            cursor: pointer; font-size: 16px; font-weight: bold; width: 100%; margin-top: 20px;
        }
        .btn:disabled { background: #ccc; cursor: not-allowed; }

        .file-area {
            border: 2px dashed #cbd5e0; border-radius: 15px; padding: 30px;
            background: #f8fafc; cursor: pointer;
        }

        .game-wrapper { position: relative; margin-bottom: 50px; }
        canvas {
            border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.25);
            background: linear-gradient(#4facfe, #00f2fe); cursor: pointer; display: block;
        }
        .game-ui { text-align: center; margin-top: 10px; color: #555; font-size: 14px; }
        .footer { font-size: 12px; color: #999; margin-bottom: 20px; margin-top: auto; }
    </style>
</head>
<body>

<div class="tool-container">
    <h3>ðŸ“„ Resimden PDF'e</h3>
    <div class="file-area" onclick="document.getElementById('imageInput').click()">
        <span style="font-size: 30px;">ðŸ“‚</span><br>
        <span style="font-size: 14px; color:#666">Resim seÃ§mek iÃ§in tÄ±kla</span>
        <input type="file" id="imageInput" accept="image/*" multiple style="display: none" onchange="updateFileCount()">
    </div>
    <p id="file-count" style="margin:10px 0 0 0; color:#007bff; font-weight:bold; font-size:14px;"></p>
    <button id="convertBtn" class="btn" onclick="convertToPDF()">PDF OLUÅžTUR</button>
    <p id="status" style="margin-top:10px; font-size:14px;"></p>
</div>

<div class="game-wrapper">
    <canvas id="gameCanvas" width="360" height="540"></canvas>
    <div class="game-ui">
        ZÄ±plamak iÃ§in tÄ±kla veya BOÅžLUK tuÅŸuna bas <br>
        <strong>En YÃ¼ksek Skor: <span id="highScoreText">0</span></strong>
    </div>
</div>

<div class="footer">&copy; 2025 GÃ¼venli AraÃ§lar.</div>

<script>
    // --- PDF FONKSÄ°YONLARI ---
    function updateFileCount() {
        const input = document.getElementById('imageInput');
        const label = document.getElementById('file-count');
        if(input.files.length > 0) label.innerText = input.files.length + " resim seÃ§ildi.";
    }
    async function convertToPDF() {
        const { jsPDF } = window.jspdf;
        const input = document.getElementById('imageInput');
        const status = document.getElementById('status');
        const btn = document.getElementById('convertBtn');
        if (input.files.length === 0) { alert("LÃ¼tfen resim seÃ§iniz."); return; }
        btn.disabled = true; btn.innerText = "Ä°ÅŸleniyor...";
        status.innerText = "HazÄ±rlanÄ±yor...";
        try {
            const doc = new jsPDF();
            for (let i = 0; i < input.files.length; i++) {
                const file = input.files[i];
                const imageData = await readFileAsDataURL(file);
                const imgProps = doc.getImageProperties(imageData);
                const pdfWidth = doc.internal.pageSize.getWidth();
                const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
                if (i > 0) doc.addPage();
                doc.addImage(imageData, 'JPEG', 0, 0, pdfWidth, pdfHeight);
            }
            doc.save("dosyalarim.pdf");
            status.innerText = "âœ… Ä°ndirildi!";
        } catch (error) { alert("Hata: " + error); } 
        finally { btn.disabled = false; btn.innerText = "PDF OLUÅžTUR"; status.innerText = ""; }
    }
    function readFileAsDataURL(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = (e) => resolve(e.target.result);
            reader.onerror = reject;
            reader.readAsDataURL(file);
        });
    }

    // --- OYUN MOTORU ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    let state = { current: 0, getReady: 0, game: 1, over: 2 };
    let frames = 0;
    let score = { best: localStorage.getItem('flappy_highscore') || 0, value: 0 };
    document.getElementById('highScoreText').innerText = score.best;
    
    // HIZ DEÄžÄ°ÅžKENÄ° (Giderek artacak)
    let gameSpeed = 1.5; // BaÅŸlangÄ±Ã§ hÄ±zÄ± (Daha yavaÅŸ)

    canvas.addEventListener('click', function(evt){
        switch(state.current){
            case state.getReady: state.current = state.game; break;
            case state.game: bird.flap(); break;
            case state.over: resetGame(); break;
        }
    });
    window.addEventListener('keydown', function(e){
        if(e.code === 'Space'){
            e.preventDefault();
            switch(state.current){
                case state.getReady: state.current = state.game; break;
                case state.game: bird.flap(); break;
                case state.over: resetGame(); break;
            }
        }
    });

    const bird = {
        x: 50, y: 150, radius: 12,
        velocity: 0, 
        gravity: 0.10, // DAHA YAVAÅž DÃœÅžÃœÅž
        jump: -3.2,    // DAHA HAFÄ°F ZIPLAMA
        
        draw: function() {
            ctx.beginPath(); ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
            ctx.fillStyle = "#FFD700"; ctx.fill(); ctx.stroke();
            
            // GÃ¶z
            ctx.beginPath(); ctx.arc(this.x+5, this.y-5, 4, 0, Math.PI*2); ctx.fillStyle="#FFF"; ctx.fill();
            ctx.beginPath(); ctx.arc(this.x+7, this.y-5, 1, 0, Math.PI*2); ctx.fillStyle="#000"; ctx.fill();
            
            // Kanat
            ctx.beginPath(); 
            let wingY = (frames % 10 < 5) ? this.y+5 : this.y-2; 
            ctx.ellipse(this.x-5, wingY, 8, 5, -0.2, 0, Math.PI*2);
            ctx.fillStyle = "#eccc68"; ctx.fill(); ctx.stroke();
            
            // Gaga
            ctx.beginPath(); ctx.moveTo(this.x+8, this.y); ctx.lineTo(this.x+20, this.y+4); ctx.lineTo(this.x+8, this.y+8);
            ctx.fillStyle = "#ff6b6b"; ctx.fill();
        },
        flap: function() { this.velocity = this.jump; },
        update: function() {
            if(state.current == state.getReady){
                this.y = 150 + Math.cos(frames/15) * 5; 
            } else {
                this.velocity += this.gravity;
                this.y += this.velocity;
                if(this.y + this.radius >= canvas.height - fg.h){
                    this.y = canvas.height - fg.h - this.radius; state.current = state.over;
                }
                if(this.y - this.radius <= 0) this.y = this.radius;
            }
        }
    };

    const bg = {
        draw: function() {
            ctx.fillStyle = "#70c5ce"; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#FFF";
            ctx.beginPath(); ctx.arc(100, 400, 30, 0, Math.PI*2); ctx.fill();
            ctx.beginPath(); ctx.arc(280, 200, 30, 0, Math.PI*2); ctx.fill();
        }
    };

    const fg = {
        h: 112, x: 0,
        draw: function() {
            ctx.fillStyle = "#ded895"; ctx.fillRect(0, canvas.height - this.h, canvas.width, this.h);
            ctx.fillStyle = "#73bf2e"; ctx.fillRect(0, canvas.height - this.h, canvas.width, 15);
            ctx.strokeStyle = "#558c22"; ctx.beginPath(); ctx.moveTo(0, canvas.height-this.h+15); ctx.lineTo(canvas.width, canvas.height-this.h+15); ctx.stroke();
        },
        update: function() {
            if(state.current == state.game){
                // Zemin de oyun hÄ±zÄ±yla hareket ediyor
                this.x = (this.x - gameSpeed) % (canvas.width/2);
            }
        }
    };

    const pipes = {
        position: [], w: 52, h: 400, gap: 120, // GAP DAHA GENÄ°Åž
        
        draw: function() {
            for(let i = 0; i < this.position.length; i++){
                let p = this.position[i];
                let topY = p.y;
                let bottomY = p.y + this.h + this.gap;
                
                let gradient = ctx.createLinearGradient(p.x, 0, p.x + this.w, 0);
                gradient.addColorStop(0, "#558c22"); gradient.addColorStop(0.5, "#73bf2e"); gradient.addColorStop(1, "#558c22");
                ctx.fillStyle = gradient;
                
                ctx.fillRect(p.x, topY, this.w, this.h);
                ctx.fillRect(p.x-2, topY+this.h-20, this.w+4, 20);
                
                ctx.fillRect(p.x, bottomY, this.w, this.h);
                ctx.fillRect(p.x-2, bottomY, this.w+4, 20);
                
                ctx.strokeStyle="#000"; ctx.strokeRect(p.x, topY, this.w, this.h); ctx.strokeRect(p.x, bottomY, this.w, this.h);
            }
        },
        update: function() {
            if(state.current !== state.game) return;
            
            // Boru Ã¼retme sÄ±klÄ±ÄŸÄ± hÄ±za gÃ¶re ayarlanÄ±r
            if(frames % Math.floor(150 / gameSpeed) == 0){
                this.position.push({ x: canvas.width, y: -150 * (Math.random() + 1) });
            }
            
            for(let i = 0; i < this.position.length; i++){
                let p = this.position[i];
                let bottomPipeY = p.y + this.h + this.gap;
                
                if(bird.x + bird.radius > p.x && bird.x - bird.radius < p.x + this.w && 
                   (bird.y - bird.radius < p.y + this.h || bird.y + bird.radius > bottomPipeY)){
                    state.current = state.over;
                }
                
                // BorularÄ± gÃ¼ncel oyun hÄ±zÄ±yla hareket ettir
                p.x -= gameSpeed;
                
                if(p.x + this.w <= 0){
                    this.position.shift();
                    score.value += 1;
                    score.best = Math.max(score.value, score.best);
                    localStorage.setItem('flappy_highscore', score.best);
                    document.getElementById('highScoreText').innerText = score.best;
                }
            }
        },
        reset: function() { this.position = []; }
    };

    function drawScore() {
        ctx.fillStyle = "#FFF"; ctx.strokeStyle = "#000";
        if(state.current == state.game){
            ctx.lineWidth = 2; ctx.font = "35px Impact";
            ctx.fillText(score.value, canvas.width/2 - 10, 50); ctx.strokeText(score.value, canvas.width/2 - 10, 50);
        } else if(state.current == state.over){
            ctx.fillStyle = "rgba(0,0,0,0.5)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#FFF"; ctx.font = "40px Impact"; ctx.fillText("OYUN BÄ°TTÄ°", 90, 200);
            ctx.font = "25px Arial"; ctx.fillText("Skor: " + score.value, 130, 250);
            ctx.fillText("En Ä°yi: " + score.best, 125, 290);
            ctx.fillStyle = "#FFD700"; ctx.fillText("Tekrar oyna!", 110, 350);
        } else if(state.current == state.getReady){
            ctx.fillStyle = "#FFF"; ctx.strokeStyle = "#000"; ctx.lineWidth = 2;
            ctx.font = "30px Impact"; ctx.fillText("HAZIR OL!", 115, 200);
            ctx.font = "16px Arial"; ctx.fillText("(BaÅŸlamak iÃ§in tÄ±kla)", 105, 240);
        }
    }

    function resetGame(){
        bird.y = 150; bird.velocity = 0; pipes.reset(); score.value = 0; frames = 0;
        gameSpeed = 1.5; // HIZI SIFIRLA
        state.current = state.getReady;
    }

    function loop(){
        bg.draw(); pipes.draw(); pipes.update(); fg.draw(); fg.update(); bird.draw(); bird.update(); drawScore();
        frames++;
        
        // --- HIZLANDIRMA MANTIÄžI ---
        if(state.current == state.game){
            // Her karede hÄ±zÄ± Ã§ok az arttÄ±r (Max hÄ±z 3.5 olsun)
            if(gameSpeed < 3.5) {
                gameSpeed += 0.0005; 
            }
        }
        
        requestAnimationFrame(loop);
    }
    loop();
</script>
</body>
</html>
