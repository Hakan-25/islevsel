<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HakanTools | Kelime AvcÄ±sÄ±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&family=Inter:wght@400;600&display=swap');

        :root {
            --bg-color: #f0f2f5;
            --sidebar-bg: #ffffff;
            --text-main: #333333;
            --text-sub: #888888;
            --accent: #3b82f6;
            --correct: #22c55e;
            --error: #ef4444;
            --cursor: #3b82f6;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            height: 100vh;
            overflow: hidden; /* PC'de scroll olmasÄ±n */
            display: flex;
        }

        /* --- SOL PANEL --- */
        .sidebar {
            width: 280px;
            background-color: var(--sidebar-bg);
            height: 100%;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #e5e7eb;
            box-shadow: var(--shadow);
            z-index: 10;
            transition: all 0.3s ease;
        }

        .back-btn {
            text-decoration: none;
            color: var(--text-sub);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 3rem;
            transition: 0.2s;
            font-size: 1rem;
        }
        .back-btn:hover { color: var(--accent); }

        .record-box {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 2rem;
            transition: 0.3s;
        }
        .record-box:hover { border-color: var(--accent); transform: translateY(-2px); }

        .record-title { font-size: 0.8rem; color: var(--text-sub); margin-bottom: 5px; text-transform: uppercase; font-weight: 700; }
        .record-score { font-size: 3rem; font-weight: 800; color: var(--accent); line-height: 1; margin: 10px 0; }
        .record-unit { font-size: 0.9rem; color: var(--text-sub); font-weight: 600; }
        
        .record-date {
            margin-top: 10px;
            font-size: 0.75rem;
            color: #94a3b8;
            border-top: 1px solid #e2e8f0;
            padding-top: 8px;
        }

        .tips {
            font-size: 0.85rem;
            color: var(--text-sub);
            line-height: 1.6;
            margin-top: auto;
            border-top: 1px solid #e5e7eb;
            padding-top: 1rem;
        }

        /* --- ORTA ALAN --- */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 100%;
        }

        /* Language Switcher */
        .lang-switch {
            position: absolute;
            top: 20px;
            right: 30px;
            display: flex;
            gap: 10px;
            z-index: 20;
        }

        .lang-btn {
            background: white;
            border: 1px solid #e2e8f0;
            padding: 8px 12px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.2rem;
            box-shadow: var(--shadow);
            transition: 0.2s;
        }

        .lang-btn.active { border-color: var(--accent); background: #f0f7ff; }

        .config-bar {
            display: flex;
            gap: 5px;
            background: #ffffff;
            padding: 8px 15px;
            border-radius: 50px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .time-btn {
            background: none;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            color: var(--text-sub);
            font-weight: 600;
            border-radius: 20px;
            transition: 0.2s;
            font-size: 0.9rem;
        }

        .time-btn.active, .time-btn:hover {
            background-color: var(--accent);
            color: white;
        }

        .live-stats {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 1.5rem;
            font-family: 'Roboto Mono', monospace;
            background: white;
            padding: 10px 30px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .typing-container {
            width: 900px;
            max-width: 90%;
            height: 160px;
            overflow: hidden;
            position: relative;
            background: #ffffff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            cursor: text;
            border: 2px solid transparent;
            transition: border-color 0.3s;
        }
        
        .typing-container:focus-within { border-color: var(--accent); }

        .words-wrapper {
            font-family: 'Roboto Mono', monospace;
            font-size: 1.6rem;
            line-height: 2.5rem;
            color: #9ca3af;
            user-select: none;
            transition: transform 0.2s ease;
        }

        .word { margin-right: 12px; display: inline-block; border-bottom: 2px solid transparent; }
        .word.error-word { border-bottom-color: var(--error); }

        .letter { position: relative; }
        .letter.correct { color: var(--correct); }
        .letter.incorrect { color: var(--error); }
        
        .letter.active::before {
            content: '';
            position: absolute;
            left: 0; bottom: 2px; width: 2px; height: 80%;
            background-color: var(--cursor);
            animation: blink 1s infinite;
        }
        .letter.active.is-space::before { left: 50%; }

        @keyframes blink { 50% { opacity: 0; } }

        #input-field { position: absolute; opacity: 0; z-index: -99; }

        /* SONUÃ‡ MODALI */
        .result-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: none;
            justify-content: center; align-items: center;
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .result-card {
            background: white; padding: 3rem; border-radius: 20px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            text-align: center; border: 1px solid #e5e7eb;
            max-width: 450px; width: 90%;
        }

        .result-title { font-size: 1.5rem; color: var(--text-sub); margin-bottom: 0.5rem; }
        .result-score { font-size: 5rem; color: var(--accent); font-weight: 800; line-height: 1; margin-bottom: 0.5rem; }
        .result-label { font-size: 1.2rem; color: var(--text-main); font-weight: 600; margin-bottom: 2rem; }
        
        .grid-stats {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
            margin-bottom: 2rem; text-align: left;
        }
        .stat-item { background: #f3f4f6; padding: 12px; border-radius: 8px; font-size: 0.9rem; }
        .stat-item span { display: block; color: var(--text-sub); font-size: 0.8rem; margin-bottom: 3px;}
        .stat-item b { display: block; font-size: 1.1rem; color: var(--text-main); }

        .restart-btn {
            background: var(--accent); color: white; border: none;
            padding: 15px 40px; font-size: 1.1rem; border-radius: 10px;
            cursor: pointer; transition: 0.2s; font-weight: 600; width: 100%;
        }
        .restart-btn:hover { background: #2563eb; transform: translateY(-2px); }

        /* --- MOBÄ°L UYUMLULUK (RESPONSIVE) --- */
        @media (max-width: 768px) {
            body {
                flex-direction: column; /* Yan yana deÄŸil, alt alta diz */
                height: 100vh;
                overflow: hidden; /* Sayfa kaymasÄ±nÄ± engelle */
            }

            /* Mobilde Sidebar'Ä± Ãœst MenÃ¼ Yap */
            .sidebar {
                width: 100%;
                height: auto;
                flex-direction: row; /* Ä°Ã§indekileri yan yana diz */
                align-items: center;
                justify-content: space-between;
                padding: 10px 15px;
                border-right: none;
                border-bottom: 1px solid #e5e7eb;
                box-shadow: none;
            }

            .back-btn { margin-bottom: 0; font-size: 1rem; color: var(--accent); }
            .back-btn span { display: inline; } /* "Ana MenÃ¼" yazÄ±sÄ±nÄ± gÃ¶ster */
            .back-btn i { font-size: 1.1rem; }

            /* Mobilde Rekor Kutusunu GÃ¶rÃ¼nÃ¼r Yap */
            .record-box {
                margin-bottom: 0;
                padding: 5px 10px;
                display: flex;
                align-items: center;
                gap: 5px;
                border: 1px solid #e2e8f0;
                background: #f8fafc;
            }
            .record-title, .record-date, .record-unit, .tips { display: none; } /* Tarih vb. gizli kalsÄ±n */
            .record-score { font-size: 1.2rem; margin: 0; color: var(--accent); }
            .record-box::before { content: "ğŸ†"; font-size: 1rem; } /* Kupa ikonu */

            .lang-switch { top: 75px; right: 10px; }
            /* Orta Alan AyarlarÄ± */
            .main-content { justify-content: start; padding-top: 20px; }
            
            .config-bar { margin-bottom: 1rem; padding: 5px; margin-top: 45px; }
            .time-btn { padding: 5px 10px; font-size: 0.8rem; }

            .live-stats { font-size: 1.5rem; padding: 5px 20px; margin-bottom: 1rem; }

            .typing-container {
                width: 95%;
                height: 120px; /* Mobilde daha az yer kaplasÄ±n */
                padding: 15px;
            }

            .words-wrapper {
                font-size: 1.3rem; /* YazÄ±larÄ± biraz kÃ¼Ã§Ã¼lt */
                line-height: 2rem;
            }

            /* SonuÃ§ EkranÄ± */
            .result-card { padding: 1.5rem; width: 95%; }
            .result-score { font-size: 3.5rem; }
        }
    </style>
</head>
<body>

    <div class="lang-switch">
        <button class="lang-btn active" id="btn-tr" onclick="setLanguage('tr')">ğŸ‡¹ğŸ‡·</button>
        <button class="lang-btn" id="btn-en" onclick="setLanguage('en')">ğŸ‡ºğŸ‡¸</button>
    </div>

    <aside class="sidebar">
        <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> <span id="ui-menu">Ana MenÃ¼</span></a>
        
        <div class="record-box">
            <div class="record-title"><span id="ui-best">EN Ä°YÄ°</span> (<span id="record-mode-label">30s</span>)</div>
            <div class="record-score" id="best-score">0</div>
            <div class="record-unit" id="ui-unit">DOÄRU KELÄ°ME</div>
            <div class="record-date" id="best-date">KayÄ±t Yok</div>
        </div>

        <div class="tips" id="ui-tips">
            <b>Mobil Ä°pucu:</b><br>
            Telefonda yazarken kelime Ã¶nerilerini (otomatik dÃ¼zeltme) kapatÄ±rsan daha rahat edersin.<br>
        </div>
    </aside>

    <main class="main-content">
        <div class="config-bar" id="time-options">
            <button class="time-btn" onclick="setTime(15)">15s</button>
            <button class="time-btn active" onclick="setTime(30)">30s</button>
            <button class="time-btn" onclick="setTime(60)">60s</button>
            <button class="time-btn" onclick="setTime(180)">3dk</button>
        </div>

        <div class="live-stats" id="timer">30</div>

        <div class="typing-container" onclick="focusInput()">
            <div class="words-wrapper" id="words-wrapper"></div>
        </div>
        
        <input type="text" id="input-field" autocomplete="off" autocapitalize="none" spellcheck="false" style="font-size: 16px;">
    </main>

    <div class="result-modal" id="result-modal">
        <div class="result-card">
            <div class="result-title" id="ui-timeout">SÃ¼re Doldu!</div>
            <div class="result-score" id="final-score">0</div>
            <div class="result-label" id="ui-result-label">DoÄŸru Kelime</div>
            
            <div class="grid-stats">
                <div class="stat-item">
                    <span id="ui-stat-keys">Toplam VuruÅŸ</span>
                    <b id="stat-keystrokes">0</b>
                </div>
                <div class="stat-item">
                    <span id="ui-stat-acc">DoÄŸruluk</span>
                    <b id="stat-acc">%0</b>
                </div>
                <div class="stat-item" style="grid-column: span 2;">
                    <span id="ui-stat-date">Tarih</span>
                    <b id="stat-date">--</b>
                </div>
            </div>

            <button class="restart-btn" onclick="resetGame()" id="ui-restart">Tekrar Dene</button>
        </div>
    </div>

    <script>
        // --- 1000 KELÄ°ME HAVUZU ---
        const wordPools = {
            tr: [
                "ben", "sen", "o", "biz", "siz", "onlar", "ve", "ile", "ama", "fakat", "lakin", "Ã§Ã¼nkÃ¼", "veya", "ya", "da", "de",
                "gelmek", "gitmek", "yapmak", "etmek", "olmak", "almak", "vermek", "sevmek", "bilmek", "gÃ¶rmek", "bakmak", "duymak",
                "yazmak", "okumak", "konuÅŸmak", "anlamak", "dÃ¼ÅŸÃ¼nmek", "baÅŸlamak", "bitirmek", "Ã§alÄ±ÅŸmak", "oynamak", "koÅŸmak", "yÃ¼rÃ¼mek",
                "ev", "okul", "iÅŸ", "araba", "masa", "sandalye", "kalem", "defter", "kitap", "bilgisayar", "telefon", "internet",
                "sabah", "Ã¶ÄŸle", "akÅŸam", "gece", "bugÃ¼n", "yarÄ±n", "dÃ¼n", "ÅŸimdi", "sonra", "Ã¶nce", "zaman", "saat", "dakika",
                "gÃ¼zel", "Ã§irkin", "iyi", "kÃ¶tÃ¼", "bÃ¼yÃ¼k", "kÃ¼Ã§Ã¼k", "uzun", "kÄ±sa", "zor", "kolay", "sÄ±cak", "soÄŸuk", "yeni", "eski",
                "kÄ±rmÄ±zÄ±", "mavi", "yeÅŸil", "sarÄ±", "siyah", "beyaz", "turuncu", "mor", "pembe", "gri", "kahverengi", "renk",
                "insan", "Ã§ocuk", "kadÄ±n", "erkek", "anne", "baba", "kardeÅŸ", "arkadaÅŸ", "Ã¶ÄŸretmen", "doktor", "mÃ¼hendis", "polis",
                "elma", "armut", "muz", "Ã§ilek", "ekmek", "su", "sÃ¼t", "Ã§ay", "kahve", "yemek", "kahvaltÄ±", "akÅŸam", "lezzetli",
                "mutlu", "Ã¼zgÃ¼n", "kÄ±zgÄ±n", "ÅŸaÅŸkÄ±n", "korkmuÅŸ", "heyecanlÄ±", "yorgun", "hÄ±zlÄ±", "yavaÅŸ", "gÃ¼Ã§lÃ¼", "zayÄ±f",
                "TÃ¼rkiye", "Ä°stanbul", "Ankara", "Ä°zmir", "dÃ¼nya", "gÃ¼neÅŸ", "ay", "yÄ±ldÄ±z", "deniz", "daÄŸ", "orman", "hava",
                "proje", "kod", "yazÄ±lÄ±m", "teknoloji", "veri", "sistem", "klavye", "ekran", "fare", "dosya", "klasÃ¶r", "uygulama",
                "baÅŸarÄ±", "hata", "kontrol", "sonuÃ§", "rapor", "analiz", "tasarÄ±m", "geliÅŸtirme", "test", "demo", "versiyon",
                "lÃ¼tfen", "teÅŸekkÃ¼r", "merhaba", "hoÅŸÃ§akal", "evet", "hayÄ±r", "belki", "elbette", "tabii", "asla", "daima", "bazen",
                "bir", "iki", "Ã¼Ã§", "dÃ¶rt", "beÅŸ", "on", "yÃ¼z", "bin", "milyon", "sayÄ±", "rakam", "matematik", "fen", "tarih",
                "mÃ¼zik", "resim", "spor", "futbol", "basketbol", "voleybol", "yÃ¼zme", "koÅŸu", "antrenman", "maÃ§", "takÄ±m", "oyuncu",
                "film", "dizi", "sinema", "tiyatro", "sanat", "kÃ¼ltÃ¼r", "gezi", "tatil", "uÃ§ak", "otobÃ¼s", "tren", "gemi", "yol",
                "cadde", "sokak", "mahalle", "ÅŸehir", "Ã¼lke", "kÄ±ta", "adres", "konum", "harita", "yÃ¶n", "saÄŸ", "sol", "ileri", "geri",
                "aile", "bebek", "dede", "nene", "hala", "teyze", "amca", "dayÄ±", "kuzen", "komÅŸu", "misafir", "yabancÄ±", "halk",
                "devlet", "millet", "bayrak", "vatan", "toprak", "sÄ±nÄ±r", "asker", "ordu", "silah", "barÄ±ÅŸ", "savaÅŸ", "zafer",
                "gÃ¶z", "kulak", "burun", "aÄŸÄ±z", "diÅŸ", "dil", "kol", "bacak", "el", "ayak", "parmak", "tÄ±rnak", "saÃ§", "baÅŸ",
                "kalp", "mide", "ciÄŸer", "kan", "damar", "kemik", "deri", "beyin", "akÄ±l", "fikir", "ruh", "can", "nefes",
                "giyim", "kÄ±yafet", "elbise", "gÃ¶mlek", "pantolon", "ceket", "ayakkabÄ±", "Ã§orap", "ÅŸapka", "atkÄ±", "eldiven", "kemer",
                "oda", "salon", "mutfak", "banyo", "tuvalet", "balkon", "bahÃ§e", "kapÄ±", "pencere", "duvar", "tavan", "taban",
                "yatak", "yorgan", "yastÄ±k", "Ã§arÅŸaf", "halÄ±", "perde", "lamba", "ayna", "dolap", "Ã§ekmece", "raf", "kutu",
                "cam", "demir", "tahta", "plastik", "kaÄŸÄ±t", "karton", "kumaÅŸ", "deri", "altÄ±n", "gÃ¼mÃ¼ÅŸ", "bakÄ±r", "taÅŸ",
                "kedi", "kÃ¶pek", "kuÅŸ", "balÄ±k", "at", "eÅŸek", "inek", "koyun", "keÃ§i", "tavuk", "horoz", "Ã¶rdek", "kaz",
                "aslan", "kaplan", "ayÄ±", "kurt", "tilki", "tavÅŸan", "fare", "yÄ±lan", "bÃ¶cek", "arÄ±", "sinek", "kelebek",
                "aÄŸaÃ§", "Ã§iÃ§ek", "gÃ¼l", "lale", "papatya", "Ã§imen", "yaprak", "dal", "kÃ¶k", "meyve", "sebze", "tohum",
                "domates", "biber", "patlÄ±can", "soÄŸan", "sarÄ±msak", "havuÃ§", "patates", "salatalÄ±k", "marul", "maydanoz", "nane",
                "et", "tavuk", "balÄ±k", "sucuk", "salam", "sosis", "yumurta", "peynir", "zeytin", "yaÄŸ", "bal", "reÃ§el",
                "tuz", "ÅŸeker", "biber", "baharat", "un", "pirinÃ§", "makarna", "Ã§orba", "pilav", "dolma", "sarma", "bÃ¶rek",
                "tatlÄ±", "pasta", "kek", "kurabiye", "dondurma", "Ã§ikolata", "biskÃ¼vi", "sakÄ±z", "meyve suyu", "gazoz", "ayran",
                "tabak", "Ã§atal", "kaÅŸÄ±k", "bÄ±Ã§ak", "bardak", "kupa", "sÃ¼rahi", "tencere", "tava", "tepsi", "fÄ±rÄ±n", "ocak",
                "buzdolabÄ±", "Ã§amaÅŸÄ±r", "bulaÅŸÄ±k", "Ã¼tÃ¼", "sÃ¼pÃ¼rge", "kovasÄ±", "bez", "deterjan", "sabun", "ÅŸampuan", "havlu",
                "koltuk", "kanepe", "sehpa", "vitrin", "televizyon", "radyo", "kamera", "fotoÄŸraf", "resim", "mÃ¼zik", "ÅŸarkÄ±",
                "sÃ¶z", "beste", "nota", "ritim", "dans", "eÄŸlence", "parti", "doÄŸum gÃ¼nÃ¼", "dÃ¼ÄŸÃ¼n", "niÅŸan", "kÄ±na", "bayram",
                "yÄ±lbaÅŸÄ±", "hediye", "sÃ¼rpriz", "kutlama", "tebrik", "baÅŸarÄ±", "Ã¶dÃ¼l", "madalya", "kupa", "derece", "rekor",
                "para", "lira", "dolar", "euro", "banka", "kredi", "kart", "borÃ§", "alacak", "hesap", "fatura", "fiÅŸ",
                "market", "bakkal", "manav", "kasap", "fÄ±rÄ±n", "eczane", "hastane", "okul", "Ã¼niversite", "sÄ±nÄ±f", "ders",
                "sÄ±nav", "not", "karne", "diploma", "mezuniyet", "Ã¶dev", "proje", "sunum", "toplantÄ±", "ofis", "bÃ¼ro",
                "ÅŸirket", "firma", "fabrika", "atÃ¶lye", "depo", "maÄŸaza", "dÃ¼kkan", "alÄ±ÅŸveriÅŸ", "satÄ±ÅŸ", "pazarlama", "reklam",
                "mÃ¼ÅŸteri", "patron", "iÅŸÃ§i", "memur", "mÃ¼dÃ¼r", "ÅŸef", "baÅŸkan", "yÃ¶netici", "lider", "ortak", "rakip",
                "siyaset", "politika", "seÃ§im", "oy", "sandÄ±k", "parti", "bakan", "vekil", "meclis", "yasa", "kanun",
                "hak", "hukuk", "adalet", "mahkeme", "hakim", "savcÄ±", "avukat", "dava", "suÃ§", "ceza", "hapis",
                "haber", "gazete", "dergi", "televizyon", "radyo", "internet", "sosyal medya", "mesaj", "mail", "mektup", "zarf",
                "telefon", "hat", "numara", "arama", "konuÅŸma", "sohbet", "muhabbet", "tartÄ±ÅŸma", "kavga", "barÄ±ÅŸ", "anlaÅŸma",
                "sevgi", "aÅŸk", "nefret", "korku", "cesaret", "umut", "hayal", "gerÃ§ek", "yalan", "doÄŸru", "yanlÄ±ÅŸ",
                "bilgi", "cahil", "alim", "bilgin", "uzman", "usta", "Ã§Ä±rak", "kalfa", "beceri", "yetenek", "zeka",
                "soru", "cevap", "Ã§Ã¶zÃ¼m", "sorun", "problem", "dert", "Ã§are", "ilaÃ§", "tedavi", "hastalÄ±k", "saÄŸlÄ±k",
                "hayat", "yaÅŸam", "Ã¶lÃ¼m", "cenaze", "mezar", "toprak", "ruh", "melek", "ÅŸeytan", "cennet", "cehennem",
                "din", "iman", "inanÃ§", "dua", "ibadet", "cami", "kilise", "havra", "tapÄ±nak", "ezan", "Ã§an",
                "tarih", "geÃ§miÅŸ", "gelecek", "anÄ±", "hatÄ±ra", "unutmak", "hatÄ±rlamak", "Ã¶ÄŸrenmek", "Ã¶ÄŸretmek", "eÄŸitim", "kÃ¼ltÃ¼r",
                "gezi", "seyahat", "turist", "rehber", "otel", "pansiyon", "kamp", "Ã§adÄ±r", "doÄŸa", "manzara", "fotoÄŸraf",
                "trafik", "kaza", "yol", "kÃ¶prÃ¼", "tÃ¼nel", "kavÅŸak", "Ä±ÅŸÄ±k", "levha", "ehliyet", "ceza", "radar",
                "hÄ±z", "sÃ¼rat", "mesafe", "uzak", "yakÄ±n", "yÃ¼ksek", "alÃ§ak", "derin", "sÄ±ÄŸ", "geniÅŸ", "dar",
                "aÄŸÄ±r", "hafif", "sert", "yumuÅŸak", "katÄ±", "sÄ±vÄ±", "gaz", "ateÅŸ", "buz", "buhar", "duman",
                "enerji", "elektrik", "pil", "akÃ¼", "motor", "benzin", "mazot", "gaz", "petrol", "kÃ¶mÃ¼r", "maden",
                "demir", "Ã§elik", "alÃ¼minyum", "plastik", "cam", "beton", "tuÄŸla", "Ã§imento", "kum", "kireÃ§", "boya",
                "inÅŸaat", "bina", "apartman", "kule", "gÃ¶kdelen", "saray", "kÃ¶ÅŸk", "yalÄ±", "villa", "kulÃ¼be", "baraka",
                "tarla", "baÄŸ", "bahÃ§e", "Ã§iftlik", "kÃ¶y", "kasaba", "ilÃ§e", "ÅŸehir", "baÅŸkent", "merkez", "taÅŸra",
                "kuzey", "gÃ¼ney", "doÄŸu", "batÄ±", "lodos", "poyraz", "rÃ¼zgar", "fÄ±rtÄ±na", "yaÄŸmur", "kar", "dolu",
                "sis", "bulut", "gÃ¶kkuÅŸaÄŸÄ±", "yÄ±ldÄ±rÄ±m", "ÅŸimÅŸek", "deprem", "sel", "yangÄ±n", "Ã§Ä±ÄŸ", "heyelan", "kuraklÄ±k",
                "Ã§Ã¶l", "vaha", "okyanus", "kÃ¶rfez", "boÄŸaz", "ada", "yarÄ±mada", "kÄ±yÄ±", "sahil", "plaj", "kumsal",
                "dalga", "akÄ±ntÄ±", "derinlik", "yÃ¼zey", "dip", "zirve", "yamaÃ§", "vadi", "ova", "plato", "tepe"
            ],
            en: [
                "the", "be", "to", "of", "and", "a", "in", "that", "have", "it", "for", "not", "on", "with", "he", "as", "you", "do", "at", "this",
                "but", "his", "by", "from", "they", "we", "say", "her", "she", "or", "an", "will", "my", "one", "all", "would", "there", "their", "what", "so",
                "up", "out", "if", "about", "who", "get", "which", "go", "me", "when", "make", "can", "like", "time", "no", "just", "him", "know", "take", "people",
                "into", "year", "your", "good", "some", "could", "them", "see", "other", "than", "then", "now", "look", "only", "come", "its", "over", "think", "also", "back",
                "after", "use", "two", "how", "our", "work", "first", "well", "way", "even", "new", "want", "because", "any", "these", "give", "day", "most", "us", "water",
                "school", "many", "found", "study", "still", "learn", "should", "world", "high", "low", "deep", "shallow", "wide", "narrow", "heavy", "hard", "soft", "hot", "cold"
            ]
        };

        const translations = {
            tr: {
                menu: "Ana MenÃ¼", best: "EN Ä°YÄ°", unit: "DOÄRU KELÄ°ME", timeout: "SÃ¼re Doldu!", 
                resultLabel: "DoÄŸru Kelime", statKeys: "Toplam VuruÅŸ", statAcc: "DoÄŸruluk", 
                statDate: "Tarih", restart: "Tekrar Dene", noRecord: "KayÄ±t Yok", 
                tips: "<b>Mobil Ä°pucu:</b><br>Telefonda yazarken kelime Ã¶nerilerini kapatÄ±rsan daha rahat edersin.<br>"
            },
            en: {
                menu: "Main Menu", best: "BEST RECORD", unit: "CORRECT WORDS", timeout: "Time's Up!", 
                resultLabel: "Correct Words", statKeys: "Total Keystrokes", statAcc: "Accuracy", 
                statDate: "Date", restart: "Try Again", noRecord: "No Record", 
                tips: "<b>Mobile Tip:</b><br>Disabling auto-correct on your phone will make typing much smoother.<br>"
            }
        };

        let currentLang = 'tr';
        let timeLeft = 30;
        let maxTime = 30;
        let isTyping = false;
        let timer = null;
        let words = [];
        let currentWordIndex = 0;
        let currentCharIndex = 0;
        
        let completedCorrectWords = 0;
        let totalKeystrokes = 0;
        let correctKeystrokes = 0;

        const wordWrapper = document.getElementById("words-wrapper");
        const inputField = document.getElementById("input-field");
        const timerTag = document.getElementById("timer");
        const resultModal = document.getElementById("result-modal");
        
        const bestScoreTag = document.getElementById("best-score");
        const bestDateTag = document.getElementById("best-date");
        const recordModeLabel = document.getElementById("record-mode-label");

        window.onload = () => { 
    // Sayfa ilk aÃ§Ä±ldÄ±ÄŸÄ±nda hafÄ±zadaki rekoru Ã§ek ve her yere (mobil dahil) yaz
    loadBestScore(maxTime); 
    setLanguage(currentLang); 
    resetGame(); 
};

        function setLanguage(lang) {
            if (isTyping) return;
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-${lang}`).classList.add('active');
            
            const t = translations[lang];
            document.getElementById('ui-menu').innerText = t.menu;
            document.getElementById('ui-best').innerText = t.best;
            document.getElementById('ui-unit').innerText = t.unit;
            document.getElementById('ui-timeout').innerText = t.timeout;
            document.getElementById('ui-result-label').innerText = t.resultLabel;
            document.getElementById('ui-stat-keys').innerText = t.statKeys;
            document.getElementById('ui-stat-acc').innerText = t.statAcc;
            document.getElementById('ui-stat-date').innerText = t.statDate;
            document.getElementById('ui-restart').innerText = t.restart;
            document.getElementById('ui-tips').innerHTML = t.tips;

            loadBestScore(maxTime);
            resetGame();
        }

        function generateWords() {
            wordWrapper.innerHTML = "";
            words = [];
            const pool = wordPools[currentLang];
            for (let i = 0; i < 300; i++) {
                words.push(pool[Math.floor(Math.random() * pool.length)]);
            }
            renderWords();
        }

        function renderWords() {
            words.forEach(word => {
                const wordDiv = document.createElement("div");
                wordDiv.className = "word";
                word.split('').forEach(char => {
                    const span = document.createElement("span");
                    span.innerText = char;
                    span.className = "letter";
                    wordDiv.appendChild(span);
                });
                const spaceSpan = document.createElement("span");
                spaceSpan.innerHTML = "&nbsp;"; 
                spaceSpan.className = "letter space";
                wordDiv.appendChild(spaceSpan);
                wordWrapper.appendChild(wordDiv);
            });
            addClassToCurrentChar("active");
        }

        window.setTime = (time) => {
            if (isTyping) return;
            maxTime = time;
            timeLeft = time;
            timerTag.innerText = timeLeft;
            document.querySelectorAll(".time-btn").forEach(btn => btn.classList.remove("active"));
            event.target.classList.add("active");
            loadBestScore(time);
            resetGame();
        }

        window.resetGame = () => {
            generateWords();
            clearInterval(timer);
            timeLeft = maxTime;
            timerTag.innerText = timeLeft;
            isTyping = false;
            
            currentWordIndex = 0;
            currentCharIndex = 0;
            completedCorrectWords = 0;
            totalKeystrokes = 0;
            correctKeystrokes = 0;
            
            inputField.value = "";
            wordWrapper.style.transform = "translateY(0px)";
            resultModal.style.display = "none";
            focusInput();
            const firstWord = wordWrapper.children[0];
            if(firstWord) firstWord.scrollIntoView({block: "start"});
        }

        inputField.addEventListener("input", (e) => {
            if (!isTyping && timeLeft > 0) {
                isTyping = true;
                timer = setInterval(initTimer, 1000);
            }

            const val = inputField.value.toLowerCase();
            const inputChar = val.slice(-1);
            const inputType = e.inputType;
            const currentWordDiv = wordWrapper.children[currentWordIndex];
            const chars = currentWordDiv.querySelectorAll(".letter");
            
            if (inputType === "deleteContentBackward") {
                if (currentCharIndex > 0) {
                    removeClassFromChar(currentWordIndex, currentCharIndex, "active");
                    currentCharIndex--;
                    removeClassFromChar(currentWordIndex, currentCharIndex, "correct");
                    removeClassFromChar(currentWordIndex, currentCharIndex, "incorrect");
                    addClassToCurrentChar("active");
                }
                return;
            }

            if (currentCharIndex < chars.length) {
                totalKeystrokes++;
                const targetChar = chars[currentCharIndex].innerText.replace(/\u00a0/g, " ");
                
                if (targetChar === " " && inputChar === " ") {
                    removeClassFromChar(currentWordIndex, currentCharIndex, "active");
                    
                    const hasMistake = currentWordDiv.querySelector(".incorrect");
                    
                    if (!hasMistake) {
                        completedCorrectWords++;
                    } else {
                        currentWordDiv.classList.add("error-word");
                    }

                    currentWordIndex++;
                    currentCharIndex = 0;
                    checkScroll();
                    if (currentWordIndex < words.length) addClassToCurrentChar("active");
                    inputField.value = "";
                } 
                else if (targetChar !== " ") {
                    removeClassFromChar(currentWordIndex, currentCharIndex, "active");
                    if (inputChar === targetChar) {
                        addClassToChar(currentWordIndex, currentCharIndex, "correct");
                        correctKeystrokes++;
                    } else {
                        addClassToChar(currentWordIndex, currentCharIndex, "incorrect");
                    }
                    currentCharIndex++;
                    if (currentCharIndex < chars.length) addClassToCurrentChar("active");
                }
            }
        });

        function initTimer() {
            if (timeLeft > 0) {
                timeLeft--;
                timerTag.innerText = timeLeft;
            } else {
                finishGame();
            }
        }

        function checkScroll() {
            const currentWordDiv = wordWrapper.children[currentWordIndex];
            const prevWordDiv = wordWrapper.children[currentWordIndex - 1];
            if (prevWordDiv && currentWordDiv.offsetTop > prevWordDiv.offsetTop) {
                const lineHeight = 40; 
                const currentTransform = parseInt(wordWrapper.style.transform.replace("translateY(", "").replace("px)", "") || 0);
                wordWrapper.style.transform = `translateY(${currentTransform - lineHeight}px)`;
            }
        }

        function finishGame() {
            clearInterval(timer);
            isTyping = false;
            
            let accuracy = 0;
            if (totalKeystrokes > 0) {
                accuracy = Math.round((correctKeystrokes / totalKeystrokes) * 100);
            }

            const now = new Date();
            const dateString = now.toLocaleDateString() + " - " + now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

            document.getElementById("final-score").innerText = completedCorrectWords;
            document.getElementById("stat-keystrokes").innerText = totalKeystrokes;
            document.getElementById("stat-acc").innerText = `%${accuracy}`;
            document.getElementById("stat-date").innerText = dateString;

            resultModal.style.display = "flex";

            saveScore(completedCorrectWords, maxTime, dateString);
        }

        function saveScore(score, mode, dateStr) {
            const key = `hakan_records_${currentLang}`;
            let records = JSON.parse(localStorage.getItem(key)) || {};
            let currentRecord = records[mode] || { score: 0, date: "" };

            if (score > currentRecord.score) {
                records[mode] = { score: score, date: dateStr };
                localStorage.setItem(key, JSON.stringify(records));
                loadBestScore(mode);
            }
        }

        function loadBestScore(mode) {
            let label = mode === 180 ? (currentLang === 'tr' ? '3dk' : '3m') : mode + "s";
            recordModeLabel.innerText = label;
            const key = `hakan_records_${currentLang}`;
            let records = JSON.parse(localStorage.getItem(key)) || {};
            let recordData = records[mode];

            if (recordData) {
                bestScoreTag.innerText = recordData.score;
                bestDateTag.innerText = recordData.date;
            } else {
                bestScoreTag.innerText = 0;
                bestDateTag.innerText = translations[currentLang].noRecord;
            }
        }

        function addClassToCurrentChar(className) { addClassToChar(currentWordIndex, currentCharIndex, className); }
        function addClassToChar(wIdx, cIdx, className) {
            const w = wordWrapper.children[wIdx];
            if(w) { const c = w.querySelectorAll(".letter")[cIdx]; if(c) c.classList.add(className); }
        }
        function removeClassFromChar(wIdx, cIdx, className) {
            const w = wordWrapper.children[wIdx];
            if(w) { const c = w.querySelectorAll(".letter")[cIdx]; if(c) c.classList.remove(className); }
        }

        window.focusInput = () => { inputField.focus(); }

        document.addEventListener("keydown", (e) => {
            if(e.key === "Tab") { e.preventDefault(); resetGame(); }
            inputField.focus();
        });

    </script>
</body>
</html>

