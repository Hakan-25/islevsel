<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HakanTools | Kelime Avcƒ±sƒ±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&family=Inter:wght@400;600&display=swap');

        :root {
            --bg-color: #f0f2f5;
            --sidebar-bg: #ffffff;
            --text-main: #333333;
            --text-sub: #888888;
            --accent: #3b82f6;
            --correct: #22c55e;
            --error: #ef4444;
            --cursor: #3b82f6;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            height: 100vh;
            overflow: hidden; /* PC'de scroll olmasƒ±n */
            display: flex;
        }

        /* --- SOL PANEL --- */
        .sidebar {
            width: 280px;
            background-color: var(--sidebar-bg);
            height: 100%;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #e5e7eb;
            box-shadow: var(--shadow);
            z-index: 10;
            transition: all 0.3s ease;
        }

        .back-btn {
            text-decoration: none;
            color: var(--text-sub);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 3rem;
            transition: 0.2s;
            font-size: 1rem;
        }
        .back-btn:hover { color: var(--accent); }

        .record-box {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 2rem;
            transition: 0.3s;
        }
        .record-box:hover { border-color: var(--accent); transform: translateY(-2px); }

        .record-title { font-size: 0.8rem; color: var(--text-sub); margin-bottom: 5px; text-transform: uppercase; font-weight: 700; }
        .record-score { font-size: 3rem; font-weight: 800; color: var(--accent); line-height: 1; margin: 10px 0; }
        .record-unit { font-size: 0.9rem; color: var(--text-sub); font-weight: 600; }
        
        .record-date {
            margin-top: 10px;
            font-size: 0.75rem;
            color: #94a3b8;
            border-top: 1px solid #e2e8f0;
            padding-top: 8px;
        }

        .tips {
            font-size: 0.85rem;
            color: var(--text-sub);
            line-height: 1.6;
            margin-top: auto;
            border-top: 1px solid #e5e7eb;
            padding-top: 1rem;
        }

        /* --- ORTA ALAN --- */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 100%;
        }

        .config-bar {
            display: flex;
            gap: 5px;
            background: #ffffff;
            padding: 8px 15px;
            border-radius: 50px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .time-btn {
            background: none;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            color: var(--text-sub);
            font-weight: 600;
            border-radius: 20px;
            transition: 0.2s;
            font-size: 0.9rem;
        }

        .time-btn.active, .time-btn:hover {
            background-color: var(--accent);
            color: white;
        }

        .live-stats {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 1.5rem;
            font-family: 'Roboto Mono', monospace;
            background: white;
            padding: 10px 30px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .typing-container {
            width: 900px;
            max-width: 90%;
            height: 160px;
            overflow: hidden;
            position: relative;
            background: #ffffff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            cursor: text;
            border: 2px solid transparent;
            transition: border-color 0.3s;
        }
        
        .typing-container:focus-within { border-color: var(--accent); }

        .words-wrapper {
            font-family: 'Roboto Mono', monospace;
            font-size: 1.6rem;
            line-height: 2.5rem;
            color: #9ca3af;
            user-select: none;
            transition: transform 0.2s ease;
        }

        .word { margin-right: 12px; display: inline-block; border-bottom: 2px solid transparent; }
        .word.error-word { border-bottom-color: var(--error); }

        .letter { position: relative; }
        .letter.correct { color: var(--correct); }
        .letter.incorrect { color: var(--error); }
        
        .letter.active::before {
            content: '';
            position: absolute;
            left: 0; bottom: 2px; width: 2px; height: 80%;
            background-color: var(--cursor);
            animation: blink 1s infinite;
        }
        .letter.active.is-space::before { left: 50%; }

        @keyframes blink { 50% { opacity: 0; } }

        #input-field { position: absolute; opacity: 0; z-index: -99; }

        /* SONU√á MODALI */
        .result-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: none;
            justify-content: center; align-items: center;
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .result-card {
            background: white; padding: 3rem; border-radius: 20px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            text-align: center; border: 1px solid #e5e7eb;
            max-width: 450px; width: 90%;
        }

        .result-title { font-size: 1.5rem; color: var(--text-sub); margin-bottom: 0.5rem; }
        .result-score { font-size: 5rem; color: var(--accent); font-weight: 800; line-height: 1; margin-bottom: 0.5rem; }
        .result-label { font-size: 1.2rem; color: var(--text-main); font-weight: 600; margin-bottom: 2rem; }
        
        .grid-stats {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
            margin-bottom: 2rem; text-align: left;
        }
        .stat-item { background: #f3f4f6; padding: 12px; border-radius: 8px; font-size: 0.9rem; }
        .stat-item span { display: block; color: var(--text-sub); font-size: 0.8rem; margin-bottom: 3px;}
        .stat-item b { display: block; font-size: 1.1rem; color: var(--text-main); }

        .restart-btn {
            background: var(--accent); color: white; border: none;
            padding: 15px 40px; font-size: 1.1rem; border-radius: 10px;
            cursor: pointer; transition: 0.2s; font-weight: 600; width: 100%;
        }
        .restart-btn:hover { background: #2563eb; transform: translateY(-2px); }

        /* --- MOBƒ∞L UYUMLULUK (RESPONSIVE) --- */
        @media (max-width: 768px) {
            body {
                flex-direction: column; /* Yan yana deƒüil, alt alta diz */
                height: 100vh;
                overflow: hidden; /* Sayfa kaymasƒ±nƒ± engelle */
            }

            /* Mobilde Sidebar'ƒ± √úst Men√º Yap */
            .sidebar {
                width: 100%;
                height: auto;
                flex-direction: row; /* ƒ∞√ßindekileri yan yana diz */
                align-items: center;
                justify-content: space-between;
                padding: 10px 15px;
                border-right: none;
                border-bottom: 1px solid #e5e7eb;
                box-shadow: none;
            }

            .back-btn { margin-bottom: 0; font-size: 0.9rem; }
            .back-btn span { display: none; } /* "Ana Men√º" yazƒ±sƒ±nƒ± gizle, sadece ok kalsƒ±n */
            .back-btn i { font-size: 1.2rem; }

            /* Mobilde Rekor Kutusunu K√º√ß√ºlt */
            .record-box {
                margin-bottom: 0;
                padding: 5px 10px;
                display: flex;
                align-items: center;
                gap: 10px;
                border: none;
                background: transparent;
            }
            .record-title, .record-date, .record-unit, .tips { display: none; } /* Fazlalƒ±klarƒ± gizle */
            .record-score { font-size: 1.5rem; margin: 0; }
            .record-box::before { content: "üèÜ "; font-size: 1.2rem; } /* Kupa ikonu ekle */

            /* Orta Alan Ayarlarƒ± */
            .main-content { justify-content: start; padding-top: 20px; }
            
            .config-bar { margin-bottom: 1rem; padding: 5px; }
            .time-btn { padding: 5px 10px; font-size: 0.8rem; }

            .live-stats { font-size: 1.5rem; padding: 5px 20px; margin-bottom: 1rem; }

            .typing-container {
                width: 95%;
                height: 120px; /* Mobilde daha az yer kaplasƒ±n */
                padding: 15px;
            }

            .words-wrapper {
                font-size: 1.3rem; /* Yazƒ±larƒ± biraz k√º√ß√ºlt */
                line-height: 2rem;
            }

            /* Sonu√ß Ekranƒ± */
            .result-card { padding: 1.5rem; width: 95%; }
            .result-score { font-size: 3.5rem; }
        }
    </style>
</head>
<body>

    <aside class="sidebar">
        <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> <span>Ana Men√º</span></a>
        
        <div class="record-box">
            <div class="record-title">EN ƒ∞Yƒ∞ (<span id="record-mode-label">30s</span>)</div>
            <div class="record-score" id="best-score">0</div>
            <div class="record-unit">DOƒûRU KELƒ∞ME</div>
            <div class="record-date" id="best-date">Kayƒ±t Yok</div>
        </div>

        <div class="tips">
            <b>Mobil ƒ∞pucu:</b><br>
            Telefonda yazarken kelime √∂nerilerini (otomatik d√ºzeltme) kapatƒ±rsan daha rahat edersin.<br>
        </div>
    </aside>

    <main class="main-content">
        <div class="config-bar" id="time-options">
            <button class="time-btn" onclick="setTime(15)">15s</button>
            <button class="time-btn active" onclick="setTime(30)">30s</button>
            <button class="time-btn" onclick="setTime(60)">60s</button>
            <button class="time-btn" onclick="setTime(180)">3dk</button>
        </div>

        <div class="live-stats" id="timer">30</div>

        <div class="typing-container" onclick="focusInput()">
            <div class="words-wrapper" id="words-wrapper"></div>
        </div>
        
        <input type="text" id="input-field" autocomplete="off" style="font-size: 16px;">
    </main>

    <div class="result-modal" id="result-modal">
        <div class="result-card">
            <div class="result-title">S√ºre Doldu!</div>
            <div class="result-score" id="final-score">0</div>
            <div class="result-label">Doƒüru Kelime</div>
            
            <div class="grid-stats">
                <div class="stat-item">
                    <span>Toplam Vuru≈ü</span>
                    <b id="stat-keystrokes">0</b>
                </div>
                <div class="stat-item">
                    <span>Doƒüruluk</span>
                    <b id="stat-acc">%0</b>
                </div>
                <div class="stat-item" style="grid-column: span 2;">
                    <span>Tarih</span>
                    <b id="stat-date">--</b>
                </div>
            </div>

            <button class="restart-btn" onclick="resetGame()">Tekrar Dene</button>
        </div>
    </div>

    <script>
        // --- 1000 KELƒ∞ME HAVUZU ---
        const wordPool = [
            "ben", "sen", "o", "biz", "siz", "onlar", "ve", "ile", "ama", "fakat", "lakin", "√ß√ºnk√º", "veya", "ya", "da", "de",
            "gelmek", "gitmek", "yapmak", "etmek", "olmak", "almak", "vermek", "sevmek", "bilmek", "g√∂rmek", "bakmak", "duymak",
            "yazmak", "okumak", "konu≈ümak", "anlamak", "d√º≈ü√ºnmek", "ba≈ülamak", "bitirmek", "√ßalƒ±≈ümak", "oynamak", "ko≈ümak", "y√ºr√ºmek",
            "ev", "okul", "i≈ü", "araba", "masa", "sandalye", "kalem", "defter", "kitap", "bilgisayar", "telefon", "internet",
            "sabah", "√∂ƒüle", "ak≈üam", "gece", "bug√ºn", "yarƒ±n", "d√ºn", "≈üimdi", "sonra", "√∂nce", "zaman", "saat", "dakika",
            "g√ºzel", "√ßirkin", "iyi", "k√∂t√º", "b√ºy√ºk", "k√º√ß√ºk", "uzun", "kƒ±sa", "zor", "kolay", "sƒ±cak", "soƒüuk", "yeni", "eski",
            "kƒ±rmƒ±zƒ±", "mavi", "ye≈üil", "sarƒ±", "siyah", "beyaz", "turuncu", "mor", "pembe", "gri", "kahverengi", "renk",
            "insan", "√ßocuk", "kadƒ±n", "erkek", "anne", "baba", "karde≈ü", "arkada≈ü", "√∂ƒüretmen", "doktor", "m√ºhendis", "polis",
            "elma", "armut", "muz", "√ßilek", "ekmek", "su", "s√ºt", "√ßay", "kahve", "yemek", "kahvaltƒ±", "ak≈üam", "lezzetli",
            "mutlu", "√ºzg√ºn", "kƒ±zgƒ±n", "≈üa≈ükƒ±n", "korkmu≈ü", "heyecanlƒ±", "yorgun", "hƒ±zlƒ±", "yava≈ü", "g√º√ßl√º", "zayƒ±f",
            "T√ºrkiye", "ƒ∞stanbul", "Ankara", "ƒ∞zmir", "d√ºnya", "g√ºne≈ü", "ay", "yƒ±ldƒ±z", "deniz", "daƒü", "orman", "hava",
            "proje", "kod", "yazƒ±lƒ±m", "teknoloji", "veri", "sistem", "klavye", "ekran", "fare", "dosya", "klas√∂r", "uygulama",
            "ba≈üarƒ±", "hata", "kontrol", "sonu√ß", "rapor", "analiz", "tasarƒ±m", "geli≈ütirme", "test", "demo", "versiyon",
            "l√ºtfen", "te≈üekk√ºr", "merhaba", "ho≈ü√ßakal", "evet", "hayƒ±r", "belki", "elbette", "tabii", "asla", "daima", "bazen",
            "bir", "iki", "√º√ß", "d√∂rt", "be≈ü", "on", "y√ºz", "bin", "milyon", "sayƒ±", "rakam", "matematik", "fen", "tarih",
            "m√ºzik", "resim", "spor", "futbol", "basketbol", "voleybol", "y√ºzme", "ko≈üu", "antrenman", "ma√ß", "takƒ±m", "oyuncu",
            "film", "dizi", "sinema", "tiyatro", "sanat", "k√ºlt√ºr", "gezi", "tatil", "u√ßak", "otob√ºs", "tren", "gemi", "yol",
            "cadde", "sokak", "mahalle", "≈üehir", "√ºlke", "kƒ±ta", "adres", "konum", "harita", "y√∂n", "saƒü", "sol", "ileri", "geri",
            "aile", "bebek", "dede", "nene", "hala", "teyze", "amca", "dayƒ±", "kuzen", "kom≈üu", "misafir", "yabancƒ±", "halk",
            "devlet", "millet", "bayrak", "vatan", "toprak", "sƒ±nƒ±r", "asker", "ordu", "silah", "barƒ±≈ü", "sava≈ü", "zafer",
            "g√∂z", "kulak", "burun", "aƒüƒ±z", "di≈ü", "dil", "kol", "bacak", "el", "ayak", "parmak", "tƒ±rnak", "sa√ß", "ba≈ü",
            "kalp", "mide", "ciƒüer", "kan", "damar", "kemik", "deri", "beyin", "akƒ±l", "fikir", "ruh", "can", "nefes",
            "giyim", "kƒ±yafet", "elbise", "g√∂mlek", "pantolon", "ceket", "ayakkabƒ±", "√ßorap", "≈üapka", "atkƒ±", "eldiven", "kemer",
            "oda", "salon", "mutfak", "banyo", "tuvalet", "balkon", "bah√ße", "kapƒ±", "pencere", "duvar", "tavan", "taban",
            "yatak", "yorgan", "yastƒ±k", "√ßar≈üaf", "halƒ±", "perde", "lamba", "ayna", "dolap", "√ßekmece", "raf", "kutu",
            "cam", "demir", "tahta", "plastik", "kaƒüƒ±t", "karton", "kuma≈ü", "deri", "altƒ±n", "g√ºm√º≈ü", "bakƒ±r", "ta≈ü",
            "kedi", "k√∂pek", "ku≈ü", "balƒ±k", "at", "e≈üek", "inek", "koyun", "ke√ßi", "tavuk", "horoz", "√∂rdek", "kaz",
            "aslan", "kaplan", "ayƒ±", "kurt", "tilki", "tav≈üan", "fare", "yƒ±lan", "b√∂cek", "arƒ±", "sinek", "kelebek",
            "aƒüa√ß", "√ßi√ßek", "g√ºl", "lale", "papatya", "√ßimen", "yaprak", "dal", "k√∂k", "meyve", "sebze", "tohum",
            "domates", "biber", "patlƒ±can", "soƒüan", "sarƒ±msak", "havu√ß", "patates", "salatalƒ±k", "marul", "maydanoz", "nane",
            "et", "tavuk", "balƒ±k", "sucuk", "salam", "sosis", "yumurta", "peynir", "zeytin", "yaƒü", "bal", "re√ßel",
            "tuz", "≈üeker", "biber", "baharat", "un", "pirin√ß", "makarna", "√ßorba", "pilav", "dolma", "sarma", "b√∂rek",
            "tatlƒ±", "pasta", "kek", "kurabiye", "dondurma", "√ßikolata", "bisk√ºvi", "sakƒ±z", "meyve suyu", "gazoz", "ayran",
            "tabak", "√ßatal", "ka≈üƒ±k", "bƒ±√ßak", "bardak", "kupa", "s√ºrahi", "tencere", "tava", "tepsi", "fƒ±rƒ±n", "ocak",
            "buzdolabƒ±", "√ßama≈üƒ±r", "bula≈üƒ±k", "√ºt√º", "s√ºp√ºrge", "kovasƒ±", "bez", "deterjan", "sabun", "≈üampuan", "havlu",
            "koltuk", "kanepe", "sehpa", "vitrin", "televizyon", "radyo", "kamera", "fotoƒüraf", "resim", "m√ºzik", "≈üarkƒ±",
            "s√∂z", "beste", "nota", "ritim", "dans", "eƒülence", "parti", "doƒüum g√ºn√º", "d√ºƒü√ºn", "ni≈üan", "kƒ±na", "bayram",
            "yƒ±lba≈üƒ±", "hediye", "s√ºrpriz", "kutlama", "tebrik", "ba≈üarƒ±", "√∂d√ºl", "madalya", "kupa", "derece", "rekor",
            "para", "lira", "dolar", "euro", "banka", "kredi", "kart", "bor√ß", "alacak", "hesap", "fatura", "fi≈ü",
            "market", "bakkal", "manav", "kasap", "fƒ±rƒ±n", "eczane", "hastane", "okul", "√ºniversite", "sƒ±nƒ±f", "ders",
            "sƒ±nav", "not", "karne", "diploma", "mezuniyet", "√∂dev", "proje", "sunum", "toplantƒ±", "ofis", "b√ºro",
            "≈üirket", "firma", "fabrika", "at√∂lye", "depo", "maƒüaza", "d√ºkkan", "alƒ±≈üveri≈ü", "satƒ±≈ü", "pazarlama", "reklam",
            "m√º≈üteri", "patron", "i≈ü√ßi", "memur", "m√ºd√ºr", "≈üef", "ba≈ükan", "y√∂netici", "lider", "ortak", "rakip",
            "siyaset", "politika", "se√ßim", "oy", "sandƒ±k", "parti", "bakan", "vekil", "meclis", "yasa", "kanun",
            "hak", "hukuk", "adalet", "mahkeme", "hakim", "savcƒ±", "avukat", "dava", "su√ß", "ceza", "hapis",
            "haber", "gazete", "dergi", "televizyon", "radyo", "internet", "sosyal medya", "mesaj", "mail", "mektup", "zarf",
            "telefon", "hat", "numara", "arama", "konu≈üma", "sohbet", "muhabbet", "tartƒ±≈üma", "kavga", "barƒ±≈ü", "anla≈üma",
            "sevgi", "a≈ük", "nefret", "korku", "cesaret", "umut", "hayal", "ger√ßek", "yalan", "doƒüru", "yanlƒ±≈ü",
            "bilgi", "cahil", "alim", "bilgin", "uzman", "usta", "√ßƒ±rak", "kalfa", "beceri", "yetenek", "zeka",
            "soru", "cevap", "√ß√∂z√ºm", "sorun", "problem", "dert", "√ßare", "ila√ß", "tedavi", "hastalƒ±k", "saƒülƒ±k",
            "hayat", "ya≈üam", "√∂l√ºm", "cenaze", "mezar", "toprak", "ruh", "melek", "≈üeytan", "cennet", "cehennem",
            "din", "iman", "inan√ß", "dua", "ibadet", "cami", "kilise", "havra", "tapƒ±nak", "ezan", "√ßan",
            "tarih", "ge√ßmi≈ü", "gelecek", "anƒ±", "hatƒ±ra", "unutmak", "hatƒ±rlamak", "√∂ƒürenmek", "√∂ƒüretmek", "eƒüitim", "k√ºlt√ºr",
            "gezi", "seyahat", "turist", "rehber", "otel", "pansiyon", "kamp", "√ßadƒ±r", "doƒüa", "manzara", "fotoƒüraf",
            "trafik", "kaza", "yol", "k√∂pr√º", "t√ºnel", "kav≈üak", "ƒ±≈üƒ±k", "levha", "ehliyet", "ceza", "radar",
            "hƒ±z", "s√ºrat", "mesafe", "uzak", "yakƒ±n", "y√ºksek", "al√ßak", "derin", "sƒ±ƒü", "geni≈ü", "dar",
            "aƒüƒ±r", "hafif", "sert", "yumu≈üak", "katƒ±", "sƒ±vƒ±", "gaz", "ate≈ü", "buz", "buhar", "duman",
            "enerji", "elektrik", "pil", "ak√º", "motor", "benzin", "mazot", "gaz", "petrol", "k√∂m√ºr", "maden",
            "demir", "√ßelik", "al√ºminyum", "plastik", "cam", "beton", "tuƒüla", "√ßimento", "kum", "kire√ß", "boya",
            "in≈üaat", "bina", "apartman", "kule", "g√∂kdelen", "saray", "k√∂≈ük", "yalƒ±", "villa", "kul√ºbe", "baraka",
            "tarla", "baƒü", "bah√ße", "√ßiftlik", "k√∂y", "kasaba", "il√ße", "≈üehir", "ba≈ükent", "merkez", "ta≈üra",
            "kuzey", "g√ºney", "doƒüu", "batƒ±", "lodos", "poyraz", "r√ºzgar", "fƒ±rtƒ±na", "yaƒümur", "kar", "dolu",
            "sis", "bulut", "g√∂kku≈üaƒüƒ±", "yƒ±ldƒ±rƒ±m", "≈üim≈üek", "deprem", "sel", "yangƒ±n", "√ßƒ±ƒü", "heyelan", "kuraklƒ±k",
            "√ß√∂l", "vaha", "okyanus", "k√∂rfez", "boƒüaz", "ada", "yarƒ±mada", "kƒ±yƒ±", "sahil", "plaj", "kumsal",
            "dalga", "akƒ±ntƒ±", "derinlik", "y√ºzey", "dip", "zirve", "yama√ß", "vadi", "ova", "plato", "tepe"
        ];

        let timeLeft = 30;
        let maxTime = 30;
        let isTyping = false;
        let timer = null;
        let words = [];
        let currentWordIndex = 0;
        let currentCharIndex = 0;
        
        let completedCorrectWords = 0;
        let totalKeystrokes = 0;
        let correctKeystrokes = 0;

        const wordWrapper = document.getElementById("words-wrapper");
        const inputField = document.getElementById("input-field");
        const timerTag = document.getElementById("timer");
        const resultModal = document.getElementById("result-modal");
        const timeBtns = document.querySelectorAll(".time-btn");
        
        const bestScoreTag = document.getElementById("best-score");
        const bestDateTag = document.getElementById("best-date");
        const recordModeLabel = document.getElementById("record-mode-label");

        window.onload = () => {
            loadBestScore(maxTime);
            resetGame();
        };

        function generateWords() {
            wordWrapper.innerHTML = "";
            words = [];
            for (let i = 0; i < 300; i++) {
                const randomWord = wordPool[Math.floor(Math.random() * wordPool.length)];
                words.push(randomWord);
            }
            renderWords();
        }

        function renderWords() {
            words.forEach(word => {
                const wordDiv = document.createElement("div");
                wordDiv.className = "word";
                word.split('').forEach(char => {
                    const span = document.createElement("span");
                    span.innerText = char;
                    span.className = "letter";
                    wordDiv.appendChild(span);
                });
                const spaceSpan = document.createElement("span");
                spaceSpan.innerHTML = "&nbsp;"; 
                spaceSpan.className = "letter space";
                wordDiv.appendChild(spaceSpan);
                wordWrapper.appendChild(wordDiv);
            });
            addClassToCurrentChar("active");
        }

        window.setTime = (time) => {
            if (isTyping) return;
            maxTime = time;
            timeLeft = time;
            timerTag.innerText = timeLeft;
            
            timeBtns.forEach(btn => btn.classList.remove("active"));
            event.target.classList.add("active");
            
            loadBestScore(time);
            resetGame();
        }

        window.resetGame = () => {
            generateWords();
            clearInterval(timer);
            timeLeft = maxTime;
            timerTag.innerText = timeLeft;
            isTyping = false;
            
            currentWordIndex = 0;
            currentCharIndex = 0;
            completedCorrectWords = 0;
            totalKeystrokes = 0;
            correctKeystrokes = 0;
            
            inputField.value = "";
            wordWrapper.style.transform = "translateY(0px)";
            resultModal.style.display = "none";
            focusInput();
            const firstWord = wordWrapper.children[0];
            if(firstWord) firstWord.scrollIntoView({block: "start"});
        }

        inputField.addEventListener("input", (e) => {
            if (!isTyping && timeLeft > 0) {
                isTyping = true;
                timer = setInterval(initTimer, 1000);
            }

            const val = inputField.value;
            const inputChar = val.slice(-1);
            const inputType = e.inputType;
            const currentWordDiv = wordWrapper.children[currentWordIndex];
            const chars = currentWordDiv.querySelectorAll(".letter");
            
            if (inputType === "deleteContentBackward") {
                if (currentCharIndex > 0) {
                    removeClassFromChar(currentWordIndex, currentCharIndex, "active");
                    currentCharIndex--;
                    removeClassFromChar(currentWordIndex, currentCharIndex, "correct");
                    removeClassFromChar(currentWordIndex, currentCharIndex, "incorrect");
                    addClassToCurrentChar("active");
                }
                return;
            }

            if (currentCharIndex < chars.length) {
                totalKeystrokes++;
                const targetChar = chars[currentCharIndex].innerText.replace(/\u00a0/g, " ");
                
                if (targetChar === " " && inputChar === " ") {
                    removeClassFromChar(currentWordIndex, currentCharIndex, "active");
                    
                    const hasMistake = currentWordDiv.querySelector(".incorrect");
                    
                    if (!hasMistake) {
                        completedCorrectWords++;
                    } else {
                        currentWordDiv.classList.add("error-word");
                    }

                    currentWordIndex++;
                    currentCharIndex = 0;
                    checkScroll();
                    if (currentWordIndex < words.length) addClassToCurrentChar("active");
                    inputField.value = "";
                } 
                else if (targetChar !== " ") {
                    removeClassFromChar(currentWordIndex, currentCharIndex, "active");
                    if (inputChar === targetChar) {
                        addClassToChar(currentWordIndex, currentCharIndex, "correct");
                        correctKeystrokes++;
                    } else {
                        addClassToChar(currentWordIndex, currentCharIndex, "incorrect");
                    }
                    currentCharIndex++;
                    if (currentCharIndex < chars.length) addClassToCurrentChar("active");
                }
            }
        });

        function initTimer() {
            if (timeLeft > 0) {
                timeLeft--;
                timerTag.innerText = timeLeft;
            } else {
                finishGame();
            }
        }

        function checkScroll() {
            const currentWordDiv = wordWrapper.children[currentWordIndex];
            const prevWordDiv = wordWrapper.children[currentWordIndex - 1];
            if (prevWordDiv && currentWordDiv.offsetTop > prevWordDiv.offsetTop) {
                const lineHeight = 40; 
                const currentTransform = parseInt(wordWrapper.style.transform.replace("translateY(", "").replace("px)", "") || 0);
                wordWrapper.style.transform = `translateY(${currentTransform - lineHeight}px)`;
            }
        }

        function finishGame() {
            clearInterval(timer);
            isTyping = false;
            
            let accuracy = 0;
            if (totalKeystrokes > 0) {
                accuracy = Math.round((correctKeystrokes / totalKeystrokes) * 100);
            }

            const now = new Date();
            const dateString = now.toLocaleDateString('tr-TR') + " - " + now.toLocaleTimeString('tr-TR', {hour: '2-digit', minute:'2-digit'});

            document.getElementById("final-score").innerText = completedCorrectWords;
            document.getElementById("stat-keystrokes").innerText = totalKeystrokes;
            document.getElementById("stat-acc").innerText = `%${accuracy}`;
            document.getElementById("stat-date").innerText = dateString;

            resultModal.style.display = "flex";

            saveScore(completedCorrectWords, maxTime, dateString);
        }

        function saveScore(score, mode, dateStr) {
            let records = JSON.parse(localStorage.getItem("hakan_typing_words_records")) || {};
            let currentRecord = records[mode] || { score: 0, date: "" };

            if (score > currentRecord.score) {
                records[mode] = { score: score, date: dateStr };
                localStorage.setItem("hakan_typing_words_records", JSON.stringify(records));
                loadBestScore(mode);
            }
        }

        function loadBestScore(mode) {
            let label = mode + "s";
            if(mode === 180) label = "3dk";
            recordModeLabel.innerText = label;

            let records = JSON.parse(localStorage.getItem("hakan_typing_words_records")) || {};
            let recordData = records[mode];

            if (recordData) {
                bestScoreTag.innerText = recordData.score;
                bestDateTag.innerText = recordData.date;
            } else {
                bestScoreTag.innerText = 0;
                bestDateTag.innerText = "Kayƒ±t Yok";
            }
        }

        function addClassToCurrentChar(className) { addClassToChar(currentWordIndex, currentCharIndex, className); }
        function addClassToChar(wIdx, cIdx, className) {
            const w = wordWrapper.children[wIdx];
            if(w) { const c = w.querySelectorAll(".letter")[cIdx]; if(c) c.classList.add(className); }
        }
        function removeClassFromChar(wIdx, cIdx, className) {
            const w = wordWrapper.children[wIdx];
            if(w) { const c = w.querySelectorAll(".letter")[cIdx]; if(c) c.classList.remove(className); }
        }

        window.focusInput = () => { inputField.focus(); }

        document.addEventListener("keydown", (e) => {
            if(e.key === "Tab") { e.preventDefault(); resetGame(); }
            inputField.focus();
        });

    </script>
</body>
</html>
